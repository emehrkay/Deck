<!DOCTYPE html>
<html>
<head>
    <meta http-equiv=Content-type content="text/html; charset=utf-8">
    <title>Deck Grid Example</title>
    <link rel="stylesheet" href="css/reset.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/site.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <script type="text/javascript" charset="utf-8" src="js/mootools.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/general.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/moofx.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/deck.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/deck.grid.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/deck.top_sites.js"></script>
    <script type="text/javascript" charset="utf-8">
        Element.implement('animate', function(){
            var moo = moofx(this);
            moo.animate.apply(moo, arguments);
            return this;
        });
        
        window.addEvent('domready', function(){
            var container = document.getElement('.grid_container');
            var cards = $$('.grid_cell'),
                deck = new Deck.TopSites(cards, {
                    'onCardAdded': function(index, card){
                        console.log('added', index)
                    }
                });

            var start = 0,
                mid = 0,
                first = $('first'),
                last = $('last'),
                middle = $('middle');

            first.addEvent('click', function(e){
                e.stop();
                
                var ele = new Element('div', {
                    'class': 'grid_cell',
                    'text': --start
                }).inject(container);
                
                deck.addCard(ele, 0);
            });
             
            last.addEvent('click', function(e){
                e.stop();
                
                var ele = new Element('div', {
                    'class': 'grid_cell',
                    'text': --start
                }).inject(container);
                
                deck.addCard(ele, deck.cards.length);
                
            });
            
            middle.addEvent('click', function(e){
                e.stop();
                
                var ele = new Element('div', {
                    'class': 'grid_cell',
                    'text': ++mid
                }).inject(container);
                
                deck.addCard(ele, Math.ceil(deck.cards.length / 2));
                
                
                    var a = new Element('a', {
                        'href': '#',
                        'styles': {
                            position: 'relative',
                            top: 10,
                            right: 10
                        },
                        text: 'x',
                        'events': {
                            'click': function(e){
                                e.stop();
                                deck.removeCard(deck.cards.indexOf(ele));
                                ele.destroy()
                            }
                        }
                    }).inject(ele);
                
            });
        });
    </script>
</head>
<body>
    <div class="grid_container" id="top_stage">
        <div class="grid_cell">one</div>
        <div class="grid_cell">two</div>
        <div class="grid_cell">three</div>
        <div class="grid_cell">four</div>
        <div class="grid_cell">five</div>
        <div class="grid_cell">six</div>
        <div class="grid_cell">seven</div>
        <div class="grid_cell">eight</div>
        <div class="grid_cell">nine</div>
        <div class="grid_cell">ten</div>
        <div class="grid_cell">eleven</div>
        <div class="grid_cell">twelve</div>
    </div>
    <a href="#" id="first">add first</a>
    <a href="#" id="middle">add middle</a>
    <a href="#" id="last">add last</a>
</body>
</html>
